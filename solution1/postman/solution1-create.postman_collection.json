{
	"info": {
		"_postman_id": "78502779-317b-4213-b02e-e828b651f6cc",
		"name": "solution1-create",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "bigip1-Test AS3 running",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "202624aa-f655-4b19-a286-430946c4f29c",
						"exec": [
							"",
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"}",
							"",
							"",
							"pm.test(\"AS3 is running\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "80a09f2e-31e5-4251-8f35-4fa3e153f0dd",
						"exec": [
							"pm.collectionVariables.set(\"DNS_NAME\", \"solution1.acme.com\");",
							"pm.collectionVariables.set(\"VS_NAME\", \"solution1\");",
							"pm.collectionVariables.set(\"PATH_NAME\", \"solution1\");",
							"pm.collectionVariables.set(\"PARTITION_NAME\", \"solution1\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://10.1.1.4/mgmt/shared/appsvcs/info",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"4"
					],
					"path": [
						"mgmt",
						"shared",
						"appsvcs",
						"info"
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip1-Create Connectivity Profile",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "74ead222-a0b6-4d7a-b640-af99636bca05",
						"exec": [
							"",
							"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
							"",
							"if (PRIOR_RESPONSE === 'OK') {",
							"",
							"}"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "720946b1-85bd-41b0-ab26-696a94b6defe",
						"exec": [
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"pm.test(\"Connectivity Profile Created\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"} else ",
							"pm.test(\"Connectivity Profile Exists\", function () {",
							"    pm.response.to.have.status(409);",
							"});",
							"",
							"",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\"name\": \"{{VS_NAME}}-cp\"\n}"
				},
				"url": {
					"raw": "https://10.1.1.4/mgmt/tm/apm/profile/connectivity/",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"4"
					],
					"path": [
						"mgmt",
						"tm",
						"apm",
						"profile",
						"connectivity",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip1-Check Scope for existing assignment",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "14012fff-c33e-4c20-9af9-1605a67eba06",
						"exec": [
							"var VS_NAME = pm.collectionVariables.get(\"VS_NAME\");\r",
							"\r",
							"\r",
							"\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"\r",
							"if(!jsonData.length) {\r",
							" if ( jsonData.Description  === VS_NAME ) {\r",
							"\tpm.collectionVariables.set(\"BIGIP1_ADDRESS\", jsonData.IPAddress.IPAddressToString );\r",
							"\tpostman.setNextRequest(\"bigip1-Create Application using AS3\");  \r",
							" }\r",
							"} else {\r",
							"\r",
							"\r",
							"for (var i = 0; i < jsonData.length; i++) {\r",
							"\r",
							"if ( jsonData[i].Description  === VS_NAME ) {\r",
							"\tpm.collectionVariables.set(\"BIGIP1_ADDRESS\", jsonData[i].IPAddress.IPAddressToString );\r",
							"\tpostman.setNextRequest(\"bigip1-Create Application using AS3\");\r",
							"}\r",
							"}\r",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"url": {
					"raw": "http://10.1.20.6:81/addr/scope-status?scope={{BIGIP1_SCOPE}}",
					"protocol": "http",
					"host": [
						"10",
						"1",
						"20",
						"6"
					],
					"port": "81",
					"path": [
						"addr",
						"scope-status"
					],
					"query": [
						{
							"key": "scope",
							"value": "{{BIGIP1_SCOPE}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip1-Check for next available address",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "28d68bc0-91ff-4532-8897-72e533e67d7e",
						"exec": [
							"\r",
							"var jsonData = JSON.parse(responseBody);\r",
							"pm.collectionVariables.set(\"BIGIP1_ADDRESS\",jsonData.address);\r",
							"\r",
							"\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"pm.test('OK', function() {\r",
							"  pm.expect(jsonData).to.have.property('address');\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "http://10.1.20.6:81/addr/available?scope={{BIGIP1_SCOPE}}",
					"protocol": "http",
					"host": [
						"10",
						"1",
						"20",
						"6"
					],
					"port": "81",
					"path": [
						"addr",
						"available"
					],
					"query": [
						{
							"key": "scope",
							"value": "{{BIGIP1_SCOPE}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip1-Checkout Address",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "58f8d822-bcf6-4faa-a21e-1aa7a57cb3bf",
						"exec": [
							"",
							"",
							"var jsonData = pm.response.json();",
							"pm.test(\"OK\", function () {",
							" ",
							"    pm.expect(jsonData.status).to.eql(\"Success\");",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n\"scope\":\"{{BIGIP1_SCOPE}}\",\n\"address\":\"{{BIGIP1_ADDRESS}}\",\n\"vs_name\":\"{{VS_NAME}}\"\n}"
				},
				"url": {
					"raw": "http://10.1.20.6:81/addr/checkout",
					"protocol": "http",
					"host": [
						"10",
						"1",
						"20",
						"6"
					],
					"port": "81",
					"path": [
						"addr",
						"checkout"
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip1-Create Application using AS3",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "5cd1eecf-9599-43cd-b815-2b69245179d0",
						"exec": [
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"}",
							"",
							"pm.test(\"Application created\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "253c8478-1886-47a7-8438-8aca149a6fff",
						"exec": [
							"",
							"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
							"",
							"if (PRIOR_RESPONSE === 'OK') {",
							"",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"class\": \"ADC\",\r\n    \"action\": \"deploy\",\r\n    \"persist\": true,\r\n    \"declaration\": {\r\n       \"class\": \"ADC\",\r\n       \"schemaVersion\": \"3.14.0\",\r\n       \"id\": \"APM\",\r\n       \"{{PARTITION_NAME}}\": {\r\n          \"class\": \"Tenant\",\r\n          \"{{PATH_NAME}}\": {\r\n             \"class\": \"Application\",\r\n             \"template\": \"generic\",\r\n             \"{{VS_NAME}}\": {\r\n                \"class\": \"Service_HTTPS\",\r\n                \"virtualAddresses\": [\r\n                   \"{{BIGIP1_ADDRESS}}\"\r\n                ],\r\n                \"virtualPort\": 443,\r\n                \"serverTLS\": \"{{VS_NAME}}-clientssl\",\r\n                \"pool\": \"ad-pool\",\r\n        \t\t\"snat\": \"auto\",\r\n        \t\t\"profileAccess\": {\r\n        \t\t\t\"use\": \"{{VS_NAME}}-psp\"\r\n        \t\t\t},\r\n\t\t\t\t\"profileConnectivity\": {\r\n                \t\"bigip\": \"/Common/{{VS_NAME}}-cp\"\r\n\t\t\t\t\t}\r\n                },\r\n\t\t\t\t\"{{VS_NAME}}-psp\": {\r\n                \t\"class\": \"Access_Profile\",\r\n                \t\"url\": \"{{FILES_BASE}}/{{VS_NAME}}/policies/profile_Common_{{VS_NAME}}-psp.conf.tar\",\r\n                \t\"ignoreChanges\": true\r\n                },\r\n                \"{{VS_NAME}}-clientssl\": {\r\n                    \"class\": \"TLS_Server\",\r\n                    \"certificates\": [\r\n                        {\r\n                        \"certificate\": \"tlsserver_local_cert\"\r\n                        }\r\n                    ]\r\n                },\r\n                \"tlsserver_local_cert\": {\r\n                    \"class\": \"Certificate\",\r\n                    \"certificate\": {\"bigip\":\"/Common/acme.com-wildcard\"},\r\n                    \"privateKey\": {\"bigip\":\"/Common/acme.com-wildcard\"}\r\n                },\r\n                \"ad-pool\": {\r\n                    \"class\": \"Pool\",  \r\n                        \"members\": [\r\n                            {\r\n                            \"serverAddresses\": [\r\n                            \"10.1.20.7\"\r\n                            ],\r\n                            \"servicePort\": 3389\r\n                            }\r\n                        ],\r\n                    \"monitors\": [\r\n                        \"icmp\"\r\n                    ]\r\n                }\r\n\r\n            }\r\n       }\r\n    }\r\n\r\n}\r\n                \r\n             \r\n          \r\n       \r\n    \r\n"
				},
				"url": {
					"raw": "https://10.1.1.4/mgmt/shared/appsvcs/declare",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"4"
					],
					"path": [
						"mgmt",
						"shared",
						"appsvcs",
						"declare"
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip5-Test AS3 is running",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "eac3686b-0977-4a41-ace4-6006329a82b0",
						"exec": [
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"}",
							"",
							"pm.test(\"AS3 is running\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "7e87315a-6d06-42cf-96ee-cc0cd5b0356c",
						"exec": [
							"",
							"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
							"",
							"if (PRIOR_RESPONSE === 'OK') {",
							"",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://10.1.1.4/mgmt/shared/appsvcs/info",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"4"
					],
					"path": [
						"mgmt",
						"shared",
						"appsvcs",
						"info"
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip5-Add bigip1 application VS to Server",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "54ec61e9-e01f-4750-808e-3f91fe5bcb45",
						"exec": [
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"pm.test(\"Virtual Server added to Server\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"} else ",
							"pm.test(\"Virtual Server Exists\", function () {",
							"    pm.response.to.have.status(409);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "0fcc6372-4e9e-4bee-bb6b-251bb8bc8006",
						"exec": [
							"setTimeout(function(){}, 2000);",
							"",
							"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
							"",
							"if (PRIOR_RESPONSE === 'OK') {",
							"",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\"name\": \"/{{PARTITION_NAME}}/{{PATH_NAME}}/{{VS_NAME}}\",\r\n\"destination\": \"{{BIGIP1_ADDRESS}}:443\"\r\n}"
				},
				"url": {
					"raw": "https://10.1.1.11/mgmt/tm/gtm/server/~Common~bigip1.f5lab.local/virtual-servers/",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"11"
					],
					"path": [
						"mgmt",
						"tm",
						"gtm",
						"server",
						"~Common~bigip1.f5lab.local",
						"virtual-servers",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip5-Create WideIP using AS3",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "73f461a7-e5cc-40c6-98e0-ceea6f22a913",
						"exec": [
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"}",
							"",
							"pm.test(\"Wide IP Created\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"",
							"var DC2_APM = pm.environment.get(\"DC2_APM\");",
							"",
							"if (DC2_APM === 'true') {",
							"",
							"} else {",
							"postman.setNextRequest(null);",
							"pm.test(\"Environment Variable set to Single Data Center APM \", function () {",
							"    pm.expect(pm.environment.get(\"DC2_APM\")).to.equal(\"false\");",
							"});",
							"}",
							"",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "e11e40c1-334c-41e0-b5a0-8e1843dd8609",
						"exec": [
							"setTimeout(function(){}, 2000);",
							"",
							"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
							"",
							"if (PRIOR_RESPONSE === 'OK') {",
							"",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n \"class\": \"ADC\",\r\n    \"schemaVersion\": \"3.6.0\",\r\n    \"id\": \"GSLB_Sample\",\r\n    \"{{VS_NAME}}\": {\r\n        \"class\": \"Tenant\",\r\n        \"Application\": {\r\n            \"class\": \"Application\",\r\n            \"template\": \"generic\",\r\n            \"testDomain\": {\r\n                \"class\": \"GSLB_Domain\",\r\n                \"domainName\": \"{{DNS_NAME}}\",\r\n                \"resourceRecordType\": \"A\",\r\n                \"poolLbMode\": \"ratio\",\r\n                \"pools\": [\r\n                              { \"use\": \"{{VS_NAME}}-pool\" }\r\n                ]\r\n            },\r\n            \"{{VS_NAME}}-pool\": {\r\n               \"class\": \"GSLB_Pool\",\r\n                \"enabled\": true,\r\n                \"lbModeAlternate\": \"ratio\",\r\n                \"lbModeFallback\": \"ratio\",\r\n                \"manualResumeEnabled\": false,\r\n                \"verifyMemberEnabled\": true,\r\n                \"members\": [\r\n                \t{\r\n                \t\"ratio\":10,\r\n                \t\"server\": {\r\n                \t\t\"bigip\": \"/Common/bigip1.f5lab.local\"\r\n                \t\t},\r\n                \t\t\"virtualServer\":\"/{{PARTITION_NAME}}/{{PATH_NAME}}/{{VS_NAME}}\"\r\n                \t}\r\n                ],\r\n                \"resourceRecordType\": \"A\"\r\n            }\r\n        }\r\n    }\r\n \r\n}"
				},
				"url": {
					"raw": "https://10.1.1.11/mgmt/shared/appsvcs/declare",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"11"
					],
					"path": [
						"mgmt",
						"shared",
						"appsvcs",
						"declare"
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip2-Test AS3 is running",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "81dbea7b-296f-47bf-a654-71de80dc21aa",
						"exec": [
							"",
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"",
							"} ",
							"",
							"pm.test(\"AS3 is running\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "99bfdfbc-5283-4e5d-b86a-1b0801fc7e7e",
						"exec": [
							"",
							"",
							"",
							"",
							"",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://10.1.1.5/mgmt/shared/appsvcs/info",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"5"
					],
					"path": [
						"mgmt",
						"shared",
						"appsvcs",
						"info"
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip2-Create Connectivity Profile",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "0a24a303-7b26-4ade-bda4-cb31b467bd08",
						"exec": [
							"",
							"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
							"",
							"if (PRIOR_RESPONSE === 'OK') {",
							"",
							"}"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "15aa79e0-882d-4a6e-844e-018d02cc8f1c",
						"exec": [
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"pm.test(\"Connectivity Profile Created\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"} else ",
							"pm.test(\"Connectivity Profile Exists\", function () {",
							"    pm.response.to.have.status(409);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\"name\": \"{{APP_NAME}}-cp\"\n}"
				},
				"url": {
					"raw": "https://10.1.1.5/mgmt/tm/apm/profile/connectivity/",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"5"
					],
					"path": [
						"mgmt",
						"tm",
						"apm",
						"profile",
						"connectivity",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip2-Create node 10.1.20.7",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "d87395df-6584-45e7-8787-1b249de67d25",
						"exec": [
							"",
							"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
							"",
							"if (PRIOR_RESPONSE === 'OK') {",
							"",
							"}"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "1a0e4511-1405-4f53-a15e-1cb307c568df",
						"exec": [
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"pm.test(\"Node Created\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"} else ",
							"pm.test(\"Node Exists\", function () {",
							"    pm.response.to.have.status(409);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\"name\": \"10.1.20.7\",\r\n\"address\": \"10.1.20.7\"\r\n}"
				},
				"url": {
					"raw": "https://10.1.1.5/mgmt/tm/ltm/node",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"5"
					],
					"path": [
						"mgmt",
						"tm",
						"ltm",
						"node"
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip2-Create Application using AS3",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "10f512ef-db61-41d0-b7b3-a7e44948fab8",
						"exec": [
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"}",
							"",
							"pm.test(\"Application Created\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "0d06c0cd-02fa-4a08-a821-81f34b34d563",
						"exec": [
							"",
							"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
							"",
							"if (PRIOR_RESPONSE === 'OK') {",
							"",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"class\": \"ADC\",\r\n    \"action\": \"deploy\",\r\n    \"persist\": true,\r\n    \"declaration\": {\r\n       \"class\": \"ADC\",\r\n       \"schemaVersion\": \"3.14.0\",\r\n       \"id\": \"APM\",\r\n       \"{{PARTITION_NAME}}\": {\r\n          \"class\": \"Tenant\",\r\n          \"{{PATH_NAME}}\": {\r\n             \"class\": \"Application\",\r\n             \"template\": \"generic\",\r\n             \"{{APP_NAME}}\": {\r\n                \"class\": \"Service_HTTPS\",\r\n                \"virtualAddresses\": [\r\n                   \"{{BIGIP3_VIP1}}\"\r\n                ],\r\n                \"virtualPort\": 443,\r\n                \"serverTLS\": \"{{APP_NAME}}-clientssl\",\r\n                \"pool\": \"ad-pool\",\r\n        \t\t\"snat\": \"auto\",\r\n        \t\t\"profileAccess\": {\r\n        \t\t\t\"use\": \"{{APP_NAME}}-psp\"\r\n        \t\t\t},\r\n\t\t\t\t\"profileConnectivity\": {\r\n                \t\"bigip\": \"/Common/{{APP_NAME}}-cp\"\r\n\t\t\t\t\t}\r\n                },\r\n\t\t\t\t\"{{APP_NAME}}-psp\": {\r\n                \t\"class\": \"Access_Profile\",\r\n                \t\"url\": \"http://files.f5lab.local/15.x/profile_Common_{{APP_NAME}}-psp.conf.tar\",\r\n                \t\"ignoreChanges\": true\r\n                },\r\n                \"{{APP_NAME}}-clientssl\": {\r\n                    \"class\": \"TLS_Server\",\r\n                    \"certificates\": [\r\n                        {\r\n                        \"certificate\": \"tlsserver_local_cert\"\r\n                        }\r\n                    ]\r\n                },\r\n                \"tlsserver_local_cert\": {\r\n                    \"class\": \"Certificate\",\r\n                    \"certificate\": {\"bigip\":\"/Common/acme.com-wildcard\"},\r\n                    \"privateKey\": {\"bigip\":\"/Common/acme.com-wildcard\"}\r\n                },\r\n                \"ad-pool\": {\r\n                    \"class\": \"Pool\",  \r\n                        \"members\": [\r\n                            {\r\n                            \"serverAddresses\": [\r\n                            \"10.1.20.7\"\r\n                            ],\r\n                            \"servicePort\": 3389\r\n                            }\r\n                        ],\r\n                    \"monitors\": [\r\n                        \"icmp\"\r\n                    ]\r\n                }\r\n\r\n            }\r\n       }\r\n    }\r\n\r\n}\r\n                \r\n             \r\n          \r\n       \r\n    \r\n"
				},
				"url": {
					"raw": "https://10.1.1.5/mgmt/shared/appsvcs/declare",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"5"
					],
					"path": [
						"mgmt",
						"shared",
						"appsvcs",
						"declare"
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip5-Add bigip3 Application VS to Server",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d2826856-9f8e-4f85-8cba-a060fed7f00a",
						"exec": [
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"pm.test(\"Virtual Server Created\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"} else ",
							"pm.test(\"Virtual Server Exists\", function () {",
							"    pm.response.to.have.status(409);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "0406ff42-f9ed-44c5-886b-ff9e409429ba",
						"exec": [
							"setTimeout(function(){}, 2000);",
							"",
							"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
							"",
							"if (PRIOR_RESPONSE === 'OK') {",
							"",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\"name\": \"/{{PARTITION_NAME}}/{{PATH_NAME}}/{{APP_NAME}}\",\r\n\"destination\": \"{{BIGIP3_VIP1}}:443\"\r\n}"
				},
				"url": {
					"raw": "https://10.1.1.11/mgmt/tm/gtm/server/~Common~bigip3.f5lab.local/virtual-servers/",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"11"
					],
					"path": [
						"mgmt",
						"tm",
						"gtm",
						"server",
						"~Common~bigip3.f5lab.local",
						"virtual-servers",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "bigip5-Add bigip3 Application to WideIP Pool",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "a3cf5e14-ca05-4bfd-8cf4-27bf88cd03bb",
						"exec": [
							"setTimeout(function(){}, 2000);",
							"",
							"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
							"",
							"if (PRIOR_RESPONSE === 'OK') {",
							"",
							"}"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "3d1a8a9b-4411-4d6f-91d0-6a3ab7291108",
						"exec": [
							"if (responseCode.code === 200) {",
							"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
							"pm.test(\"Virtual Server Added\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"} else ",
							"pm.test(\"Virtual Server Exists\", function () {",
							"    pm.response.to.have.status(409);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "\r\n\r\n{\r\n\"name\":\"bigip3.f5lab.local:/{{PARTITION_NAME}}/{{PATH_NAME}}/{{APP_NAME}}\"\r\n\t\r\n\t\r\n}"
				},
				"url": {
					"raw": "https://10.1.1.11/mgmt/tm/gtm/pool/a/~{{APP_NAME}}~Application~{{APP_NAME}}-pool/members",
					"protocol": "https",
					"host": [
						"10",
						"1",
						"1",
						"11"
					],
					"path": [
						"mgmt",
						"tm",
						"gtm",
						"pool",
						"a",
						"~{{APP_NAME}}~Application~{{APP_NAME}}-pool",
						"members"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "e2b12b78-2d96-4077-9557-2293254f581a",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "1ca079da-50bf-42d6-90cf-535fb509d7cc",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "ee8287f0-c6c6-4f1f-942f-aff7a6bbe119",
			"key": "DNS_NAME",
			"value": "",
			"type": "string"
		},
		{
			"id": "eb51d48c-ee5d-473a-a069-6a495a0c677b",
			"key": "PARTITION_NAME",
			"value": "",
			"type": "string"
		},
		{
			"id": "f06af38a-c161-4e06-a0bb-02412edbf211",
			"key": "PATH_NAME",
			"value": "",
			"type": "string"
		},
		{
			"id": "d845a630-71e4-4454-942e-d826d517cf11",
			"key": "VS_NAME",
			"value": "",
			"type": "string"
		},
		{
			"id": "9478b13c-a6bf-4d9e-ae25-cf80529a2083",
			"key": "PRIOR_RESPONSE",
			"value": "",
			"type": "string"
		},
		{
			"id": "1a31597c-de87-4347-a56f-886a6f749737",
			"key": "BIGIP1_ADDRESS",
			"value": "",
			"type": "string"
		},
		{
			"id": "909f8739-8124-488f-ad5b-31dc834328de",
			"key": "LENGTH",
			"value": "",
			"type": "string"
		}
	],
	"protocolProfileBehavior": {}
}